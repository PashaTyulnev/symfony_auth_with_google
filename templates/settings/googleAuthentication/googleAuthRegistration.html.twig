{% extends 'base.html.twig' %}

{% block body %}
    <div class="p-8 max-w-2xl mx-auto relative">

        {# Logout Button - Elegant in der oberen rechten Ecke #}
        <div class="absolute top-8 right-8 z-10 animate-fade-in m-3">
            <a href="{{ path('app_logout') }}"
               class="group flex items-center space-x-2 px-4 py-2 bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-2xl border border-gray-200/50 dark:border-gray-700/50 hover:bg-gray-100/80 dark:hover:bg-gray-700/80 hover:shadow-lg transition-all duration-200">
                <span class="text-sm font-light text-gray-600 dark:text-gray-400 group-hover:text-gray-900 dark:group-hover:text-white transition-colors">
                    Abmelden
                </span>
                {{ ux_icon('lucide:log-out', {
                    class: 'w-4 h-4 text-gray-400 dark:text-gray-500 group-hover:text-gray-600 dark:group-hover:text-gray-300 transition-colors transform group-hover:translate-x-0.5'
                }) }}
            </a>
        </div>

        <div class="backdrop-blur-xl bg-white/90 dark:bg-gray-900/90 rounded-3xl shadow-2xl border border-gray-200/50 dark:border-gray-700/50 p-10 animate-fade-in">

            {# Header mit elegantem Icon #}
            <div class="flex items-center justify-center mb-10">
                <div class="p-4 bg-gradient-to-br from-blue-500 to-blue-600 rounded-3xl shadow-lg animate-bounce-in">
                    {{ ux_icon('lucide:shield-plus', { class: 'w-10 h-10 text-white' }) }}
                </div>
            </div>

            <div class="text-center mb-8">
                <h2 class="text-3xl font-light text-gray-900 dark:text-white mb-4">
                    Zwei-Faktor-Authentifizierung
                </h2>
                <p class="text-base font-light text-gray-500 dark:text-gray-400 max-w-lg mx-auto leading-relaxed">
                    Verwenden Sie <span class="font-medium text-gray-700 dark:text-gray-300">Google Authenticator</span>,
                    um Ihr Konto mit einer zusätzlichen Sicherheitsebene zu schützen.
                </p>
            </div>

            {# QR Code Section mit elegantem Design #}
            <div class="relative mb-10 animate-slide-up" style="animation-delay: 200ms">
                <div class="absolute inset-0 bg-gradient-to-br from-blue-500/10 to-purple-500/10 rounded-3xl blur-xl"></div>
                <div class="relative bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-800/50 dark:to-gray-900/50 rounded-3xl p-8 border border-gray-200/50 dark:border-gray-700/50">

                    <div class="flex items-center justify-between mb-6">
                        <div class="flex items-center space-x-2">
                            <p class="text-base font-medium text-gray-700 dark:text-gray-200">
                                QR-Code scannen
                            </p>
                        </div>
                    </div>

                    <div class="flex flex-col items-center">
                        <div class="relative p-6 bg-white dark:bg-gray-800 rounded-2xl shadow-inner">
                            <img src="{{ qrCodeDataUri }}"
                                 alt="QR Code für Google Authenticator"
                                 class="w-48 h-48 rounded-xl">
                            {# Decorative corners #}
                            <div class="absolute top-2 left-2 w-6 h-6 border-t-2 border-l-2 border-blue-500 rounded-tl-lg"></div>
                            <div class="absolute top-2 right-2 w-6 h-6 border-t-2 border-r-2 border-blue-500 rounded-tr-lg"></div>
                            <div class="absolute bottom-2 left-2 w-6 h-6 border-b-2 border-l-2 border-blue-500 rounded-bl-lg"></div>
                            <div class="absolute bottom-2 right-2 w-6 h-6 border-b-2 border-r-2 border-blue-500 rounded-br-lg"></div>
                        </div>

                        <p class="text-xs text-gray-500 dark:text-gray-400 mt-4 text-center font-light">
                            Öffnen Sie Google Authenticator und scannen Sie diesen Code
                        </p>
                    </div>
                </div>
            </div>

            {# Action Button mit elegantem Design #}
            <div class="text-center animate-fade-in-delayed">
                <a href="{{ path('app_2fa_manual') }}"
                   class="relative inline-flex items-center px-8 py-4 bg-gradient-to-r from-blue-600 to-blue-700 dark:from-blue-500 dark:to-blue-600 text-white font-medium rounded-2xl shadow-lg hover:shadow-2xl transform hover:scale-[1.02] transition-all duration-200 group">
                    <span class="relative z-10">Weiter zur PIN-Eingabe</span>
                    {{ ux_icon('lucide:arrow-right', {
                        class: 'w-5 h-5 ml-2 transform group-hover:translate-x-1 transition-transform'
                    }) }}
                    <div class="absolute inset-0 bg-gradient-to-r from-blue-500 to-blue-600 dark:from-blue-400 dark:to-blue-500 rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-200"></div>
                </a>

                <p class="text-xs text-gray-500 dark:text-gray-400 mt-4 font-light">
                    Nach dem Scannen erhalten Sie einen 6-stelligen Code
                </p>
            </div>

            {# Alternative: Abbrechen/Zurück Link #}
            <div class="mt-6 text-center">
                <a href="{{ path('app_settings') }}"
                   class="text-sm text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 transition-colors duration-200 font-light inline-flex items-center group">
                    {{ ux_icon('lucide:arrow-left', {
                        class: 'w-4 h-4 mr-1 transform group-hover:-translate-x-0.5 transition-transform'
                    }) }}
                    Zurück zu den Einstellungen
                </a>
            </div>

        </div>
    </div>

    {# CSS für Animationen #}
    <style>
        @keyframes fade-in {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slide-up {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes bounce-in {
            0% {
                opacity: 0;
                transform: scale(0.3);
            }
            50% {
                transform: scale(1.05);
            }
            70% {
                transform: scale(0.9);
            }
            100% {
                opacity: 1;
                transform: scale(1);
            }
        }

        .animate-fade-in {
            animation: fade-in 0.6s ease-out;
        }

        .animate-slide-up {
            animation: slide-up 0.8s ease-out both;
        }

        .animate-bounce-in {
            animation: bounce-in 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        .animate-fade-in-delayed {
            animation: fade-in 0.6s ease-out 0.6s both;
        }

        /* QR Code scanner animation */
        @keyframes scan {
            0%, 100% {
                transform: translateY(0);
            }
            50% {
                transform: translateY(100%);
            }
        }
    </style>
{% endblock %}
